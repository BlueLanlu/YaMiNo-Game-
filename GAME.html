<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>YaMiNo Gamoe! 抽卡漸慢動畫</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #111;
      color: #fff;
      text-align: center;
      padding: 50px;
    }
    h1 {
      font-size: 36px;
      margin-bottom: 40px;
    }
    .card-section {
      display: inline-block;
      background-color: #222;
      padding: 30px;
      margin: 20px;
      border-radius: 20px;
      width: 300px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    }
    .card-section h2 {
      margin-bottom: 20px;
      font-size: 24px;
    }
    .drawBtn {
      padding: 15px 30px;
      font-size: 20px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.2s ease, background-color 0.3s ease;
    }
    .drawBtn:hover {
      background-color: #218838;
      transform: scale(1.05);
    }
    .drawBtn:active {
      transform: scale(0.95);
    }
    .result {
      margin-top: 20px;
      font-size: 20px;
      color: #00ffc8;
      min-height: 80px;
      /* 改成 pre-wrap，讓 \n 換行有效 */
      white-space: nowrap;
	  overflow: hidden;
	  text-overflow: ellipsis;
      position: relative;
      left: 0;
    }
  </style>
</head>
<body>

  <h1>🎴 YaMiNo Gamoe! 🎴</h1>

  <div class="card-section">
    <h2>卡池一：能力1</h2>
    <button class="drawBtn" onclick="drawCard('result1', pool, this)">DRAW!!!</button>
    <div class="result" id="result1"></div>
  </div>

  <div class="card-section">
    <h2>卡池二：能力2</h2>
    <button class="drawBtn" onclick="drawCard('result2', pool, this)">我叫你抽!!!</button>
    <div class="result" id="result2"></div>
  </div>

  <div class="card-section">
    <h2>卡池三：能力3</h2>
    <button class="drawBtn" onclick="drawCard('result3', pool, this)">再抽!!!</button>
    <div class="result" id="result3"></div>
  </div>

  <div class="card-section">
    <h2>種族抽取</h2>
    <button class="drawBtn" onclick="drawCard('result4', racePool, this)">抽種族!!!</button>
    <div class="result" id="result4"></div>
  </div>
  
  <div class="card-section">
    <h2>武器</h2>
    <button class="drawBtn" onclick="drawCard('result5', WeapenPool, this)">抽武器!!!</button>
    <div class="result" id="result5"></div>
  </div>
  
  <div class="card-section">
    <h2>特殊天賦</h2>
    <button class="drawBtn" onclick="drawCard('result6', TalentPool, this)">抽天賦!!!</button>
    <div class="result" id="result6"></div>
  </div>
  
  <div class="card-section">
    <h2>地形</h2>
    <button class="drawBtn" onclick="drawCard('result7', PlacePool, this)">抽地形!!!</button>
    <div class="result" id="result7"></div>
  </div>
  
  <div class="card-section">
    <h2>突發事件</h2>
    <button class="drawBtn" onclick="drawCard('result8', EventPool, this)">抽事件!!!</button>
    <div class="result" id="result8"></div>
  </div>


<script>
  const pool = [
    "無下限術式.赫 (短距離傳送)(三回合一次)(特殊)(S)",
    "無下限術式.蒼 (超強化體術)(反應力永久強化)(特殊)(S)",
    "反轉術式 (A)（只能修復小傷，斷肢需兩回合）",
    "黑閃 (A)（普通傷害的平方倍）",
    "十畫咒法 (B)（弱點攻擊）",
    "詛咒惡魔 (A)（詛咒對手一個負面效果，共三次）",
    "石化惡魔 (A)（石化對手一回合，冷卻五回合）",
    "狐狸惡魔 (B)",
    "十種影法術 (S)",
    "熔岩",
    "黑繩（阻斷能力，五回合內燃盡）",
    "蜘蛛人2099",
    "海水",
    "閃光",
    "雷電",
    "創造（基礎金屬與元素）",
    "絲線",
    "火焰",
    "神的不在場證明（三回合隱身，冷卻兩回合）",
    "第三代火焰能力者（熱空氣、電波、惡魔火）",
    "瞬間移動（兩回合一次）",
    "複製（複製對手能力一次，最多兩次）",
    "爆炸",
    "時間暫停（三次）",
    "四次元公寓（兩回合躲藏，冷卻三回合）",
    "血輪眼（進化會失去能力與武器）",
    "吸血（依傷口吸取）",
    "生命偷取（少量）",
    "植物",
    "東堂的拍手術式",
    "暗影大人史萊姆（一次核爆）",
    "惠惠的爆裂魔法（兩次，用後疲勞）",
    "神盾（免疫攻擊一回合，冷卻三回合）",
    "死靈法術（召喚死靈軍隊）",
    "犧牲召喚（召喚基礎能力，五次）",
    "模仿（體術動作，不含能力）",
    "超再生（斷肢三回合恢復，冷卻三回合）",
    "風", "火", "水", "雷", "土", "冰", "太陽", "水晶", "鋼",
    "One for All", "All for One",
    "逕庭拳（延遲自動再攻擊）",
    "延遲傷害（下一回合才造成傷害）",
    "咒靈操術",
    "全反擊（物理攻擊反擊一次）",
    "PLANT//SHAPER（隕石、傳送門，冷卻五回合）",
    "赤血操術（需流血）",
    "須佐能呼",
    "惡魔體（免疫物理攻擊，自我修復）",
    "波紋", "蜈蚣赫子", "羽赫", "Xeno梟赫子", "螺旋丸",
    "神威（三回合一次）",
    "幻術（三回合冷卻）",
    "召喚幫手（現實人物）",
    "始解", "卍解",
    "黑霧", "死亡回歸（兩次）", "煙幕",
    "無限長繩子", "沙德威斯坦（兩回合，之後當機一回合）",
    "程式駭入", "王子戰法",
    "元氣彈", "加力炮", "龜派氣功",
    "毀滅（三次）", "抹消（五次）",
    "奈米科技", "無人機控制",
    "金正恩（核彈與北韓軍隊）", "習近平（核彈與共軍）",
    "投影咒法", "咒言（語言越強自損越多）",
    "毒", "仙人跳", "瞬步", "剃（兩回合一次）",
    "月牙天衝", "聖文字（BLEACH）", "月亮", "日蝕", "特殊召喚", "轉生",
    "嘴炮（心靈）", "嘴炮（物理）",
    "酸", "氣彈", "黏黏球",
    "立場屏障（兩回合物理有效）",
    "迷因攻擊", "念動力（不能撕裂）",
    "Sans", "液態氮", "速度與激情",
    "武裝色", "死靈召喚", "神之義眼", "半冷半熱",
    "虛閃"
  ];

  const racePool = [
    "天使", "精靈", "機器人", "鏈鋸人", "武士刀人",
    "宇志波佐助", "宇志波鼬", "宇志波止水", "宇志波班", "宇志波帶土",
    "人類", "魚人", "吸血鬼", "魚族", "龍族", "死神", "不死族",
    "五條家(行動強化)", "禪院家(體術強化)", "青眼白龍", "黑色石板",
    "藍色鎧甲", "七夕祭", "銀河守護者", "海賊王", "蜘蛛俠", "鋼鐵人",
    "神奇女俠", "蝙蝠俠", "冰與火之歌", "神秘小隊", "破壞神", "暗殺者",
    "幻影旅團", "死侍", "獵人協會", "火影忍者", "高達", "賽亞人", "超人"
  ];
  
  const WeapenPool = [
     "惡魔果實","炎魔刀(vergil)","時空刃","勝利誓約之劍","撒旦刃","造船模擬器的槌子","法杖",
	 "域門疆(封鎖對手一項能力20回合)","七海的鉈刀(七海)","乙骨的武士刀(乙骨)","性轉藥水","匕手",
	 "小刀","飛刀","天鎖斬月","拳套","甩棍","雙刀流","三刀流","神器劍","雙槍","烏茲","RPG","噴子","雙節棍",
	 "神之斧","十字努","卍","斬魄刀","YAMAHA TMAX 560重機","求道玉","信夫的拳頭","噴火器","手炮","朗基努斯之槍",
	 "盾牌","武士刀","天逆牟","三結天盾","三節棍","馬桶塞"
  ];
  
  const TalentPool = [
     "自殘","舔血","感電","預知未來(一次敵人行動)(兩回合一次)",
     "六眼[無下限](若有蒼或赫其中一種直接進階成無下限術式{六眼})(特殊)(可使用無下限1回合,冷卻3回合,不限次)","呼吸法(強化身體)",
     "黑閃(強化能力)","彩虹(男同)","元素抵抗","天生的強運(免疫三次攻擊)","詛咒(對敵人施加一層負面效果)",
     "六眼[普通](開啟可獲得超感官3回合,5回合冷卻,不限次)","完美控制","極速","支配","傲慢","心靈感應",
     "心眼","仙人體","天體","惡靈體質(每三回合出現一隻惡靈進行無差別攻擊)","不幸(每5回合一項能力不能使用)","天與咒縛",
     "天身的強者","鎖血(一旦受到持續傷害or一擊斃殺則直接無效化,否則不死)","身體殘缺:(腳殘,斷手,眼瞎)","冷靜",
     "霸王色霸氣","超神級反應力"
  ];
  
  const PlacePool = [
     "平地","山地","台地","盆地","虛空站台","太空","火山","韓的後山","城市","海洋",
     "空島","小島","竹林後山","信夫阿公家","學校","那美剋星","沙漠","台七乙","摩艾石像陣",
     "怪獸宇宙","沼澤","火影村"
  ];
  
  const EventPool = [
     "隕石來襲","火山爆發","海嘯","血月",
     "商人[出現3回合](使用自身能力隨機抽取一項能力(一人一次)，使用武器隨機抽取一次武器，使用一項能力隨機抽取一次地形，使用100元來購買一個能力或武器位置)(擁有[強運]天賦能免費兌換一次上述一項商品)",
     "無","下雨","下酸雨","全體縮小","落雷","殭屍危機","回合縮短"
  ];
  
  
  

  // 儲存計時器，避免多次重疊觸發
  const timers = {};

  function drawCard(resultId, cardArray, btn) {
    if(timers[resultId]) {
      // 若目前動畫正在進行，點擊無效
      return;
    }

    const resultElem = document.getElementById(resultId);
    resultElem.textContent = ""; // 清空文字

    // 按鈕動畫
    btn.style.transition = 'transform 0.1s ease';
    btn.style.transform = 'translateX(10px)';
    setTimeout(() => {
      btn.style.transform = 'translateX(0px)';
    }, 100);

    // 漸慢抽卡動畫
    let totalSteps = 15; // 總共顯示多少次文字
    let step = 0;
    // 抽出最後一張牌
    const finalCard = cardArray[Math.floor(Math.random() * cardArray.length)];

    function animate() {
      if(step >= totalSteps) {
        // 顯示最終卡片，判斷是否超過10字，超過就換行
        let text = finalCard;
        if(text.length > 10) {
          text = text.slice(0, 10) + '\n' + text.slice(10);
        }
        resultElem.textContent = text;
        timers[resultId] = null;
        return;
      }

      // 顯示隨機卡片名稱
      const randomCard = cardArray[Math.floor(Math.random() * cardArray.length)];
      resultElem.textContent = randomCard;

      // 漸慢計時器：越往後越慢，使用指數遞增間隔
      // 計算下一次呼叫延遲(ms)，例如從30ms開始，越來越長
      let delay = Math.floor(30 * Math.pow(1.15, step));

      timers[resultId] = setTimeout(() => {
        step++;
        animate();
      }, delay);
    }

    animate();
  }
</script>

</body>
</html>
